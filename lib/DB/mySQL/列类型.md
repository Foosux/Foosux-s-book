# 列类型
<!-- toc -->

> 通过列类型，可以限定插入数据的`类型`以及`长度范围`。

在 SQL 中，将数据类型分成了三大类，分别为：数值型、字符串型和日期时间型。

## 数值型

### 整数型

在 SQL 中，由于要考虑节省磁盘空间的问题，因此系统又将整型细分成五类，分别为

- `tinyint`：迷你整型，使用 1 个字节存储数据（常用）；
- smallint：小整型，使用 2 个字节存储数据；
- mediumint：中整型，使用 3 个字节存储数据；
- `int`：标准整型，使用 4 个字节存储数据（常用）；
- bigint：大整型，使用 8 个字节存储数据。

在 SQL 中数值类型默认是有符号位的，即分正负。如果需要使用`无符号的数据`，这就需要咱们自己对数据类型进行声明啦，即在声明数据类型时，追加`unsigned`关键字。

```js
// nomarl

// 无符号
alter table my_int add int_5 tinyint unsigned;
// 零填充: 意义在于保证数据的格式
alter table my_int add int_6(3) tinyint zerofill;
```

### 小数型

小数型，即带有小数点或者范围超出整型的数值类型。在 SQL 中，将小数型细分为浮点型和定点型两种，其中：

- 浮点型：小数点浮动，精度有限，容易丢失精度
  - float：单精度，占用 4 个字节存储数据，精度范围大概为 7 位左右
  - double：双精度，占用 8 个字节存储数据，精度范围大概为 15 位左右
- 定点型：小数点固定，精度固定，不会丢失精度

浮点型的使用方式：如果直接用float，则表示没有小数部分；如果用float(M,D)，其中M代表总长度，D代表小数部分长度，M-D则为整数部分长度。

当咱们插入数据的时候，定点数的整数部分一定不能超出长度范围（进位也不可以），小数部分的长度则可以随意超出，没有限制，系统会自动进行四舍五入的操作：

```js
// 创建浮点数表
create table my_float(
    f1 float,
    f2 float(10,2),  
    f3 float(6,2)
)charset utf8;

// 创建定点数表
create table my_decimal(
    f1 float(10,2),
    d1 decimal(10,2)
)charset utf8;
```

## 日期时间型

日期时间型数据，顾名思义，就是用来表示日期和时间的数据类型，共有五种类型，分别为:

- datetime：日期时间，其格式为yyyy-MM-dd HH:mm:ss，表示的范围是从 1000 年到 9999 年，有零值，即0000-00-00 0000:00；
- date：日期，就是datetime的date部分；
- time：时间，或者说是时间段，为指定的某个时间区间之间，包含正负时间；
- timestamp：时间戳，但并不是真正意义上的时间戳，其是从1970年开始计算的，格式和datetime一致；
- year：年份，共有两种格式，分别为year(2)和year(4).

```js
// 创建日期时间表

create table my_date(
    d1 datetime,
    d2 date,
    d3 time,
    d4 timestamp,
    d5 year
)charset utf8;
```

## 字符串型

在 SQL 中，将字符串类型分成了 6 类，分别为：`char`、`varchar`、`text`、`blob`、`enum`和`set`.

### 定长字符串

即磁盘（二维表）在定义结构的时候就已经确定了最终数据的存储长度。

- char(L)：L 表示 Length，即可以存储的长度，单位为字符，最大长度为 255；
- char(4)：表示在 UTF8 环境下，需要 4*3=12 个字节。

### 变长字符串

即在分配存储空间的时候，按照最大的空间分配，但是实际用了多少，则是根据具体的数据来确定。

- varchar(L)：L 表示 Length，理论长度是 65536，但是会多出 1 到 2 个字节来确定存储的实际长度；
- varchar(10)：例如存储 10 个汉字，在 UTF8 环境下，需要 10*3+1=31 个字节。

实际上，如果存储长度超过 255 个字符，则既不用定长字符串也不用变长字符串，而是用文本字符串text.

### 文本字符串

如果数据量非常大，通常说超过 255 个字符就会使用文本字符串。根据存储的格式进行分类，可以分为：

- text：存储文字；
- blob：存储二进制数据（其实际上都是存储路径），通常不用。

### 枚举字符串

需要事先将所有可能出现的结果都设计好，实际上存储的数据必须是规定好的数据中的一个。

- 定义：enum('元素1','元素2','元素3'...)，例如`enum('男','女','保密')`；
- 使用：存储的数据，只能是事先定义好的数据。

```js
// 创建枚举表
create table my_enum(
    gender enum('男','女','保密')
)charset utf8;

// 插入测试数据
insert into my_enum values ('男');                 // 单条
insert into my_enum values ('男'),('女'),('保密');  // 多条
```

> 枚举字符串还有一个作用，那就是：节省存储空间（枚举数据通常都有一个别名），枚举实际上存储的是数值而不是字符串本身。

> 使用枚举的效率并不高（低于其他类型的数据），但能规范数据和节省存储空间。

### 集合字符串

跟枚举类似，实际存储的是数值而不是字符串。

- 定义：set，元素列表；
- 使用：可以使用元素列表中的多个元素，用逗号分隔。

```js
// 创建集合表
create table my_set(
  hobby set('音乐','电影','旅行','美食','摄影','运动','宠物')
)charset utf8;

// 插入测试数据
insert into my_set values ('电影,美食,宠物');
insert into my_set values (3);
```
