# Redis

> [Redis（REmote DIctionary Server）](https://redis.io/)是开源免费的高性能的`key-value`数据库，用于缓存，提升I/O效率。

通常拿数据的的顺序： 缓存 => 内存 => 磁盘 。由于磁盘I/O速度太慢，需要加一层缓存，redis是一种缓存方案。

## 应用场景

`高性能`、`高并发`

- 配合关系型数据库做`高速缓存`
  - 缓存高频次访问的数据，降低数据库io
  - 分布式架构，做session共享  

- 当数据量的总大小一个机器放不下时
- 数据索引一个机器的内存放不下时
- 访问量（读写混合）一个实例放不下时

## 支持的数据结构

5种基本数据类型

- string：字符串
- hash：散列 （更像是数据库的一条记录）
  - 字段
  - value
- List: 列表。支持`push`、`pop`数据
- Set: 集合。（用于IP统计、关注功能）
  - 所有数据不能有重复
  - 无序的
- Sorted Set: 有序集合（用于：文章点赞）
  - scost 权重
  - value 值

## 存在的问题

- 缓存和数据库双写一致性问题
- 缓存雪崩问题
- 缓存击穿问题
- 缓存的并发竞争问题

### 避免缓存穿透

> 持久化保存 => 从库

redis进行`持久化保存`，避免服务挂的时候重建缓存需要花费太长的时间

## 答疑

- 单线程的redis为什么这么快？
  - 纯内存操作
  - 单线程操作，避免了平凡的上下文切换
  - 采用了非阻塞I/O多路复用机制
