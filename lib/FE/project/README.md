# 工程化实践

> 与其费尽心思地告诉别人要遵守某种规则，以规避某种痛苦，倒不如从工具层面就消灭这种痛苦。

面向开发
- 初始化项目结构
- 代码压缩
- JS、CSS编译
  - babel
  - postCSS、Less、Sass、Stylus
- 模块化
  - JS:  ES6Moudle、CommonJS、AMD、CMD ...
  - CSS
    - CSS Modules: 仍然使用CSS，只是让JS来管理依赖。它能够最大化地结合CSS生态和JS模块化能力，目前来看是最好的解决方案。Vue的scoped style也算是一种。
    - CSS in JS: CSS in JS是彻底抛弃CSS，使用JS或JSON来写样式。这种方法很激进，不能利用现有的CSS技术，而且处理伪类等问题比较困难；
    - Shadow DOM: Shadow DOM是WebComponents的标准。它能解决全局污染问题，但目前很多浏览器不兼容，对我们来说还很久远；

面向体验优化
-

面向部署
- 增量部署
- 持续集成


## 简史

- 服务器端渲染HTML及控制路由 RESTFul
优点：有利于网页SEO

个人终端设备和浏览器性能的提升

- 前端渲染  （spa）
优点：减轻服务器压力、可以离线使用、无跳转刷新、路由控制更灵活。
缺点：需等待JS加载完毕才渲染（白屏时间），不利于SEO

Node 的出现，丰富了前端工具生态。

- 同构JS

## 前后端分离

### 优点-提升效率

- 开发角度
并行开发，缩短开发周期

- 测试角度
更精准的问题定位

- 部署角度
动态（HTML模板）、静态（JS、CSS、图片等）文件分离部署并结合回滚策略

### HTML模板的几种处理方式

### spa项目

不存在HTML模板的概念，所有HTML均有JS在浏览器下生成，将HTML作为静态文件处理。

部署阶段需要注意不能令浏览器将HTML强制缓存到本地

### HTML模板由后端部署

前端编写和维护HTML，后端部署。分离不彻底。

- HTML模板引擎的支持
- HTML模板的初始数据（mock）
- 各种一步数据接口的数据（mock）

### 大前端项目

前端工程师负责与客户端相关的所有文件，包含HTML模板。衍生出中间层。

## 解决的问题

## 要做的事情

- 目录结构的制定
- 编码规范
- 前后端接口规范
- 文档规范
- 组件管理
- Git分支管理
- Commit描述规范
- 定期CodeReview
- 视觉图标规范
...

### 脚手架

脚手架工具的核心目的是

需要解决几个问题

- CLI

### 构建

#### 解决的问题

- 模块化开发

- 资源定位

- 增量更新

- 缓存

### 本地开发服务器

#### localServer、动态构建、HMR
#### Mock服务
#### SSR

### 部署

### 工作流

#### gitflow

- master
- hotfix
- dev

#### webHock

持续集成、持续交付、持续部署
